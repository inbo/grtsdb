<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create a Sampling Frame Using GRTS • grtsdb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Create a Sampling Frame Using GRTS">
<meta property="og:description" content="Create an SQLite database containing the sampling framework
    for different levels of resolution. Take a sample from this framework.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">grtsdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="news/index.html">NEWS</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/basic.html">Basic Usage of grtsdb</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li>
  <a href="CONTRIBUTING.html">Contributing</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/inbo/grtsdb" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/INBOVlaanderen" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://www.facebook.com/pg/INBOVlaanderen" class="external-link">
    <span class="fa fa-facebook"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="grtsdb">grtsdb<a class="anchor" aria-label="anchor" href="#grtsdb"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <code>grtsdb</code> is to create a spatially balanced sample based on the ‘Generalised Random Tesselation Stratified’ strategy. We store the base schema in an SQLite database to make the sampling reproducible. Sampling the same database with the same parameters yields a stable sample.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the latest stable version use</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># activate the INBO r-universe</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
    INBO <span class="op">=</span> <span class="st">'https://inbo.r-universe.dev'</span>, CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"grtsdb"</span><span class="op">)</span></code></pre></div>
<p>You can install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"inbo/grtsdb"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example.</p>
<p>Connect to a database.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tmp_copy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"grts"</span>, fileext <span class="op">=</span> <span class="st">".sqlite"</span><span class="op">)</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"grts.sqlite"</span>, package <span class="op">=</span> <span class="st">"grtsdb"</span><span class="op">)</span> <span class="op">!=</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"grts.sqlite"</span>, package <span class="op">=</span> <span class="st">"grtsdb"</span><span class="op">)</span>, <span class="va">tmp_copy</span><span class="op">)</span>
<span class="op">}</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://inbo.github.io/grtsdb/" class="external-link">grtsdb</a></span><span class="op">)</span>
<span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/connect_db.html">connect_db</a></span><span class="op">(</span><span class="va">tmp_copy</span><span class="op">)</span></code></pre></div>
<p>To extract a sample, you’ll need to specify the bounding box in projected coordinates and the size of the grid cells.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">32</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">32</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="reference/extract_sample.html">extract_sample</a></span><span class="op">(</span>grtsdb <span class="op">=</span> <span class="va">db</span>, samplesize <span class="op">=</span> <span class="fl">10</span>, bbox <span class="op">=</span> <span class="va">bbox</span>, cellsize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt;     x1c  x2c ranking</span>
<span class="co">#&gt; 1  22.5 21.5       0</span>
<span class="co">#&gt; 2  26.5  1.5       1</span>
<span class="co">#&gt; 3   3.5 23.5       2</span>
<span class="co">#&gt; 4  10.5  8.5       3</span>
<span class="co">#&gt; 5  24.5 18.5       4</span>
<span class="co">#&gt; 6  16.5  2.5       5</span>
<span class="co">#&gt; 7  10.5 30.5       6</span>
<span class="co">#&gt; 8   9.5  5.5       7</span>
<span class="co">#&gt; 9  24.5 31.5       8</span>
<span class="co">#&gt; 10 27.5 12.5       9</span></code></pre></div>
<p>Repeating the sample yields the same results.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/extract_sample.html">extract_sample</a></span><span class="op">(</span>grtsdb <span class="op">=</span> <span class="va">db</span>, samplesize <span class="op">=</span> <span class="fl">10</span>, bbox <span class="op">=</span> <span class="va">bbox</span>, cellsize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt;     x1c  x2c ranking</span>
<span class="co">#&gt; 1  22.5 21.5       0</span>
<span class="co">#&gt; 2  26.5  1.5       1</span>
<span class="co">#&gt; 3   3.5 23.5       2</span>
<span class="co">#&gt; 4  10.5  8.5       3</span>
<span class="co">#&gt; 5  24.5 18.5       4</span>
<span class="co">#&gt; 6  16.5  2.5       5</span>
<span class="co">#&gt; 7  10.5 30.5       6</span>
<span class="co">#&gt; 8   9.5  5.5       7</span>
<span class="co">#&gt; 9  24.5 31.5       8</span>
<span class="co">#&gt; 10 27.5 12.5       9</span></code></pre></div>
<p>You can add legacy sites to the sampling scheme.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">legacy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">17</span>, <span class="fl">6</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="reference/add_legacy_sites.html">add_legacy_sites</a></span><span class="op">(</span><span class="va">legacy</span>, bbox <span class="op">=</span> <span class="va">bbox</span>, cellsize <span class="op">=</span> <span class="fl">1</span>, grtsdb <span class="op">=</span> <span class="va">db</span><span class="op">)</span>
<span class="fu"><a href="reference/extract_legacy_sample.html">extract_legacy_sample</a></span><span class="op">(</span>grtsdb <span class="op">=</span> <span class="va">db</span>, samplesize <span class="op">=</span> <span class="fl">10</span>, bbox <span class="op">=</span> <span class="va">bbox</span>, cellsize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; Creating index for legacy level 5. May take some time... Done.</span>
<span class="co">#&gt;     x1c  x2c ranking</span>
<span class="co">#&gt; 1  16.5  6.5       0</span>
<span class="co">#&gt; 2   4.5  4.5       1</span>
<span class="co">#&gt; 3   3.5 23.5       2</span>
<span class="co">#&gt; 4  22.5 21.5       3</span>
<span class="co">#&gt; 5  26.5  1.5       4</span>
<span class="co">#&gt; 6   9.5  5.5       5</span>
<span class="co">#&gt; 7  10.5 30.5       6</span>
<span class="co">#&gt; 8  24.5 18.5       7</span>
<span class="co">#&gt; 9  27.5 12.5       8</span>
<span class="co">#&gt; 10  2.5 15.5       9</span></code></pre></div>
<p>You can compact the database for storage.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/compact_db.html">compact_db</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></code></pre></div>
<p>Disconnect the database when done.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/inbo/grtsdb/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/inbo/grtsdb/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing grtsdb</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8804-4216" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Bruno De Vos <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-9523-3453" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://inbo.github.io/checklist/reference/figures/logo-en.png" height="24"></a> <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
<li><a href="https://github.com/inbo/grtsdb/actions" class="external-link"><img src="https://github.com/inbo/grtsdb/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://app.codecov.io/gh/inbo/grtsdb?branch=master" class="external-link"><img src="https://codecov.io/gh/inbo/grtsdb/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, Bruno De Vos, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://inbo.github.io/checklist/reference/figures/logo-en.png" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
